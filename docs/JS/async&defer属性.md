# async & defer 属性

`<script>` 标签的 `async` 和 `defer` 属性都是用来控制 JavaScript 脚本的加载和执行行为的，但它们有不同的工作方式和适用场景。下面是它们的主要区别：

## `async` 属性

- 加载方式：当脚本被标记为 `async` 时，浏览器会在下载 HTML 的同时并行下载 JavaScript 文件。
- 执行时机：**脚本会在下载完成后立即执行，不管 HTML 是否已经完全解析完毕。也就是说，async 脚本的执行是不确定的，取决于哪个脚本最先下载完成。**
- 适用场景：适合那些与页面内容无关，或者不依赖于 DOM 结构的独立脚本（例如，分析脚本或广告脚本）。

```
<script src="example.js" async></script>
```

## `defer` 属性

- 加载方式：当脚本被标记为 `defer` 时，浏览器会在下载 HTML 的同时并行下载 JavaScript 文件。
- 执行时机：**脚本会在文档完全解析后执行，但在 DOMContentLoaded 事件之前。这意味着所有 defer 脚本会按照它们在文档中的出现顺序执行，且不会阻塞 HTML 的解析。**
- 适用场景：适合那些需要在 DOM 完全加载之后执行的脚本（例如，初始化功能或操作 DOM 的脚本）。

```
<script src="example.js" defer></script>
```

## 总结

- `async`：脚本下载和执行是异步的，执行顺序不保证。适用于独立、非关键的脚本。
- `defer`：脚本下载是异步的，但执行顺序是按照脚本在文档中的顺序来执行，并且在文档解析完成后执行。适用于需要依赖于完整 DOM 的脚本。

通常，`defer` 是推荐用于需要与页面 DOM 交互的脚本，而 `async` 更适合于那些不依赖于 DOM 和其他脚本的独立功能脚本。
