# 双线程与单线程架构

## 单线程架构的劣势

- 首屏渲染依赖 JS 代码的解析和执行，存在性能瓶颈。

## 双线程架构的优势

分为 UI 线程和 JS 线程：

- UI 线程负责渲染，响应用户的交互；
- JS 线程负责执行业务逻辑。

UI 线程解析完模板文件后，可以拿初始数据或者从本地取缓存数据直接渲染，做到首屏直出；等到主接口返回后，再通过 JS 线程来更新数据，并重新渲染，达到 FMP。

## 双线程架构需要考虑的

### JS 线程与 UI 线程的通信

数据同步问题：可以考虑通过 state 来架起线程间通信的桥梁，JS 线程通过更新 state 来触发重新渲染，UI 线程从最新的 state 里取到数据。（但是这毕竟涉及线程间通信，开销较大，需要尽可能减少）
